<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Project Site Monitoring</title>

    <link rel="stylesheet" href="style.css">

    <link href="https://unpkg.com/maplibre-gl@4.1.0/dist/maplibre-gl.css" rel="stylesheet" />
    <script src="https://unpkg.com/maplibre-gl@4.1.0/dist/maplibre-gl.js"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>

    <div id="auth-screen">
        <div id="auth-container">
            <div id="login-wrapper" class="auth-wrapper">
                <form id="login-form">
                    <h2>Login</h2>
                    <div class="input-field">
                        <input type="email" id="login-email" required>
                        <label>Enter your email</label>
                    </div>
                    <div class="input-field">
                        <input type="password" id="login-password" required>
                        <label>Enter your password</label>
                    </div>
                    <button type="submit">Log In</button>
                    <div class="register">
                        <p>Don't have an account? <a class="toggle-auth" data-form="signup">Register</a></p>
                    </div>
                </form>
            </div>
            <div id="signup-wrapper" class="auth-wrapper hidden">
                <form id="signup-form">
                    <h2>Sign Up</h2>
                    <div class="input-field">
                        <input type="email" id="signup-email" required>
                        <label>Enter your email</label>
                    </div>
                    <div class="input-field">
                        <input type="password" id="signup-password" required>
                        <label>Enter your password</label>
                    </div>
                    <button type="submit">Sign Up</button>
                    <div class="register">
                        <p>Already have an account? <a class="toggle-auth" data-form="login">Login</a></p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="admin-password-screen" class="hidden">
        <div class="modal-content">
            <h2>Admin Panel Access</h2>
            <div class="form-group">
                <label for="admin-password">Password</label>
                <input type="password" id="admin-password" placeholder="Enter admin password">
            </div>
            <button id="admin-login-btn" class="action-button">Login</button>
            <button id="admin-cancel-btn" class="nav-button" style="margin-top: 0.5rem;">Cancel</button>
        </div>
    </div>

    <div id="app-container" class="app-container hidden">
        <header>
            <h1>Site Monitor</h1>
            <div id="user-info">
                <span id="user-email"></span>
                <button id="admin-panel-btn" class="nav-button">Admin</button>
                <button id="logout-btn" class="action-button">Logout</button>
            </div>
        </header>
        <nav>
            <button class="nav-button active" data-tab="map-tab">üó∫Ô∏è Dashboard</button>
            <button class="nav-button" data-tab="report-tab">üìù New Report</button>
            <button class="nav-button" data-tab="notifications-tab">üîî Notifications</button>
            <button class="nav-button hidden" data-tab="admin-tab">‚öôÔ∏è Admin Panel</button>
        </nav>
        <main>
            <div id="map-tab" class="tab-content"><div id="map"></div><div class="map-controls"><label for="toggle-traffic">Show Traffic:</label><input type="checkbox" id="toggle-traffic"></div></div>
            <div id="report-tab" class="tab-content hidden"><div class="card"><h2>Submit a New Report</h2><form id="report-form"><div class="form-group"><label for="report-image">Image of Issue</label><input type="file" id="report-image" accept="image/*" required></div><div class="form-group"><label for="report-notes">Notes</label><textarea id="report-notes" rows="4" placeholder="Describe the issue, location, etc."></textarea></div><button type="submit" class="action-button">Submit & Analyze</button></form><p id="report-status"></p></div></div>
            <div id="notifications-tab" class="tab-content hidden"><div class="card"><h2>Recent Notifications</h2><ul id="notification-list" class="notification-list"></ul></div></div>
            <div id="admin-tab" class="tab-content hidden"><div class="card"><h2>API Key Management</h2><p>Enter and save the API keys for the external services.</p><form id="api-key-form"><div class="form-group"><label for="key-tomtom">TomTom API Key</label><input type="password" id="key-tomtom"></div><div class="form-group"><label for="key-openweathermap">OpenWeatherMap API Key</label><input type="password" id="key-openweathermap"></div><div class="form-group"><label for="key-roboflow-url">Roboflow API URL</label><input type="text" id="key-roboflow-url"></div><div class="form-group"><label for="key-roboflow-private">Roboflow Private API Key</label><input type="password" id="key-roboflow-private"></div><div class="form-group"><label for="key-telegram-token">Telegram Bot Token</label><input type="password" id="key-telegram-token"></div><div class="form-group"><label for="key-telegram-chatid">Telegram Chat ID</label><input type="text" id="key-telegram-chatid"></div><button type="submit" class="action-button">Save Keys</button></form></div></div>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>
